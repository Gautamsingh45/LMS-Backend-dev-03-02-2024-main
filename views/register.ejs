
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css">
    <link rel="stylesheet" href="/css/register.css">
    <!-- google uatho -->
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">

    <!-- end -->
    <title>Blockcept.ai</title>

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
   
       <script src="/js/register.js"></script>
       <style>
        .input-container {
            position: relative;
            width: 100%;
        }
        
        #usernameOrEmail {
            
            /* Adjust right padding to accommodate the error message   border: 1px solid #ccc;
            border-radius: 5px; width: calc(100% - 10px);*/
           
            position: relative;
        }
        
        #usernameOrEmail-error {
            color: red;
            font-weight: bold;
            position: absolute;
            top: 0;
            right: 15px; /* Adjust as needed */
            height: 100%;
            display: flex;
            align-items: center;
        }
        
        






        
       </style>
      
      
    
       <script>
        document.addEventListener('DOMContentLoaded', function() {
            const usernameOrEmailInput = document.getElementById('usernameOrEmail');
            const errorDiv = document.getElementById('usernameOrEmail-error');
    
            usernameOrEmailInput.addEventListener('input', function() {
                const usernameOrEmail = usernameOrEmailInput.value;
    
                // Check if input value is empty
                if (!usernameOrEmail.trim()) {
                    errorDiv.textContent = '';
                    document.getElementById('register-btn').disabled = true;
                    return; // Exit function if input is empty
                }
    
                fetch(`/check-username-email/${usernameOrEmail}`)
                    .then(response => response.json())
                    .then(data => {
                        if (data.exists) {
                            // Clear error message if username/email exists
                            errorDiv.textContent = 'âœ”';
                            errorDiv.style.color = 'green';
                            document.getElementById('register-btn').disabled = false;
                        } else {
                            // Show 'Invalid' if username/email does not exist
                            errorDiv.textContent = 'X';
                            errorDiv.style.color = 'red';
                            document.getElementById('register-btn').disabled = true;
                        }
                    })
                    .catch(error => console.error(error));
            });
        });
    </script>

   

   
    
   
    
</head>

<body>
    <div class="top-logo">
        <img class="large-logo" src="/images/redlogo.png" alt="Saarthi Logo">
      </div>
    <div class="container" id="container">
        <div class="form-container sign-up">
            <form action="/api/auth/signup" method="post" id="signupForm" > <!-- id="signupForm" -->
                <h1>Create Account</h1><br>
                <!-- <div class="social-icons">
                    <a href="#" class="icon"><i class="fa-brands fa-google-plus-g"></i></a>
                    <a href="#" class="icon"><i class="fa-brands fa-facebook-f"></i></a>
                    <a href="#" class="icon"><i class="fa-brands fa-github"></i></a>
                    <a href="#" class="icon"><i class="fa-brands fa-linkedin-in"></i></a>
                </div> -->
                <span>or use your email for registration.</span><br>
                
                <input type="name"  name="firstName" placeholder="First Name" required>
                <input type="name"  name="lastName" placeholder="Last Name" required>
                <input type="name"  name="username" id="username" placeholder="Username" required>
                <span id="username-error"  style="color: #ffcc00; font-weight: bold; align-content: left; text-align:left;"></span>
                <input type="email" id="email" name="email" placeholder="Email" required>
                <span id="email-error" style="color: #ffcc00; font-weight: bold;"></span>
                <input type="password" id="password" name="password" placeholder="Password" required>
                <span id="password-error"></span> 
                <!-- <div id="password-strength-text" class="password-strength-text"></div>-->
                <button  id="register-btn" disabled>Sign Up</button>  <!-- onclick="openPopup()" -->
                <div id="popupModal" class="popup" style="display: none; position: fixed; top: 20px; left: 50%; transform: translateX(-50%); z-index: 9999;">
                    <div class="popup-content" style="background-color: #4CAF50; color: white; border-radius: 8px; box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1); padding: 20px; max-width: 400px; margin: 0 auto; text-align: center;">
                        <span class="close-btn" style="position: absolute; top: 10px; right: 10px; cursor: pointer; font-size: 18px; font-weight: bold;" onclick="closePopup()">X</span>
                        <div id="popupMessage"></div>
                    </div>
                </div>
                
                
            </form>
           
        </div>
        
        <div class="form-container sign-in">
            <form action="/api/auth/signin" method="post" id="signin" style="text-align: left;">
                <h1>Sign In</h1><br>
                <!-- <div class="social-icons">
                    <a href="#" class="icon"><i class="fa-brands fa-google-plus-g"></i></a>
                    <a href="#" class="icon"><i class="fa-brands fa-facebook-f"></i></a>
                    <a href="#" class="icon"><i class="fa-brands fa-github"></i></a>
                    <a href="#" class="icon"><i class="fa-brands fa-linkedin-in"></i></a>
                </div> -->
                <span>or use your email password.</span><br>
                <div class="input-container">
                    <input type="name" id="usernameOrEmail" name="usernameOrEmail" placeholder="Username/Email" required>
                    <span id="usernameOrEmail-error"></span>
                               
                
                </div> 
                
               
                <input type="password" id="password" name="password" placeholder="Password" required>
                
           
                <!-- <a href="#" id="forgotPassword">Forget Your Password?</a> -->
                <a href="#" id="forgotPassword" style="color: blue; text-decoration: underline; cursor: pointer;">Forget Your Password?</a>
            
                <button id="register-btn" type="submit">Sign In</button>
                <div id="popupModal" class="popup" style="display: none; position: fixed; top: 20px; left: 50%; transform: translateX(-50%); z-index: 9999;">
                    <div class="popup-content" style="background-color: #4CAF50; color: white; border-radius: 8px; box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1); padding: 20px; max-width: 400px; margin: 0 auto; text-align: center;">
                        <span class="close-btn" style="position: absolute; top: 10px; right: 10px; cursor: pointer; font-size: 18px; font-weight: bold;" onclick="closePopup()">X</span>
                        <div id="popupMessage"></div>
                    </div>
                </div>
               
            </form>
            <form action="/forgot-password" method="post" id="forgotPasswordForm" style="display: none;">
                
                <h1>Forget Password</h1><br>
                <span>Enter your email to reset your password</span><br>
                <span class="closing-btn" style="position: absolute; top: 20px; right: 30px; cursor: pointer; font-size: 18px; font-weight: bold;" onclick="showSignInForm()">X</span>
                <input type="email" id="email" name="email" placeholder="Email" required>
                <span id="email-error" style="color: #ffcc00; font-weight: bold;"></span>
                <button>Reset Password</button>
                <!-- <a href="#" style="color: blue; text-decoration: underline; cursor: pointer;" onclick="submitSignInForm()">sign-in</a> -->
                <div id="popupModal" class="popup" style="display: none; position: fixed; top: 20px; left: 50%; transform: translateX(-50%); z-index: 9999;">
                    <div class="popup-content" style="background-color: #4CAF50; color: white; border-radius: 8px; box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1); padding: 20px; max-width: 400px; margin: 0 auto; text-align: center;">
                        <span class="close-btn" style="position: absolute; top: 10px; right: 10px; cursor: pointer; font-size: 18px; font-weight: bold;" onclick="closePopup()">X</span>
                        <div id="popupMessage"></div>
                    </div>
                </div>
            </form>
            <div class="social-icons">
        </div>
        </div>
        <div class="toggle-container">
            <div class="toggle">
                <div class="toggle-panel  toggle-left">
                    <h1>Welcome!</h1>
                    <p>Join Us.</p>
                    <button class="hidden" id="login">Sign Up</button>
                </div>
                <div class="toggle-panel toggle-right">
                    <h1>Welcome!</h1>
                    <p>Use your existing account for login.</p>
                    <button class="hidden" id="register">Sign In</button>
                </div>
               
        </div>
     
    


    </div>


  
</div>

    
    
   
     
</body>

<script>
    // Function to show the sign-in form
    function showSignInForm() {
        $('#signin').show();
        $('.closing-btn').hide();
    }

    $(document).ready(function() {
        // Handle click event for closing-btn in forgot password form
        $('.closing-btn').click(function() {
            // Show the sign-in form when closing the forgot password form
            showSignInForm();
        });
    });
</script>



<script>
    // Function to display pop-up modal with error message
   
   // Function to close the pop-up modal
   //registration page
   function closePopup() {
    var popupModal = document.getElementById('popupModal');
    popupModal.style.display = 'none';
}

// Check if the form has been submitted and there's an error message
var formSubmitted = localStorage.getItem('formSubmitted');
var errorMessage = "<%= errorMessage %>"; // Get the error message from the server-side

if (formSubmitted && errorMessage) {
    // Display the error message in the pop-up modal
    var popupMessage = document.getElementById('popupMessage');
    popupMessage.innerText = errorMessage;

    // Show the pop-up modal
    var popupModal = document.getElementById('popupModal');
    popupModal.style.display = 'block';

    localStorage.removeItem('formSubmitted');
}

// Listen for form submission
document.getElementById('signupForm').addEventListener('submit', function() {
    // Set a flag in localStorage to indicate that the form has been submitted
    localStorage.setItem('formSubmitted', true);
});

document.getElementById('signin').addEventListener('submit', function() {
    // Set a flag in localStorage to indicate that the form has been submitted
    localStorage.setItem('formSubmitted', true);
});

document.getElementById('forgotPasswordForm').addEventListener('submit', function() {
    // Set a flag in localStorage to indicate that the form has been submitted
    localStorage.setItem('formSubmitted', true);
});



</script>

<script>

  const container = document.getElementById('container');
const registerBtn = document.getElementById('register');
const loginBtn = document.getElementById('login');


loginBtn.addEventListener('click', () => {
    container.classList.remove("active");
});
registerBtn.addEventListener('click', () => {
    container.classList.add("active");
});

</script>

<script>
    $(document).ready(function() {
        $('#forgotPassword').click(function() {
            $('#signin').hide();
            $('#forgotPasswordForm').show();
        });
    });
</script>
</html>
